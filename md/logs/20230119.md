# 實習日誌 20230119

## 09:30 檢查信箱

檢查 Gmail, Facebook, Slack, LINE。

## 10:00 生命靈數

導師傳來訊息，寫說今天生命靈數有一些修改需求：

1. 年、月、日的防呆機制：不屬於西元年格式的，月份 1 ~ 12 以外，日期輸入不屬於該月份的日期，不讓送出
2. 按確認後，先跳出視窗，等到按讚後關閉視窗按鈕按完後，再跑出測驗讀取中

查到參考資料 [JavaScript：檢查日期是否存在](https://www.cythilya.tw/2017/05/19/javascript-is-date-exist/)，改寫目前的表單驗證函式，並在年月日前面補零。完成第一個修改需求。

導師請客，讓我和另一位實習生用他的手機選飲料。

## 12:00 午餐

餐廳：杉SHAN 台北松山

我點了義大利天使麵 (小) $59、白蘭地油拌香檸蝦 $75、桂花味噌茄子 $15、茉莉茶香水蓮 $20，合計 $169。

---

## 13:00 回到公司

調整彈出視窗函式。想到電腦版才有彈出視窗，手機版沒有，問導師如何處理。

## 14:30 去問問題

傳訊息給導師＂第一點已完成，請問第二點在手機上要如何處理＂。

拿到飲料了，烏弄南京三民店 冬露雙凍 $55 少甜去冰。雙凍是杏仁凍和桂花凍。

導師回覆＂手機不變，就電腦版改就好＂。

## 16:30 好像不行

第二點的要求是＂電腦版狀態下，在首頁按下送出按鈕之後開啟彈出視窗，在彈出視窗按下關閉按鈕後關閉視窗，回到首頁再顯示測驗讀取中的動畫，再前往結果頁＂、＂手機板維持現狀＂。

先用中文搜尋＂關閉視窗後執行 JS＂，找不到答案。

後來找到 [Detect browser or tab closing](https://stackoverflow.com/questions/3888902/detect-browser-or-tab-closing)，還有 [How to capture the browser window close event?](https://stackoverflow.com/questions/1631959/how-to-capture-the-browser-window-close-event)，不過這些資料都是在偵測＂離開網頁文件之前＂的事件 (onunload or onbeforeunload)，不是第二點指定的功能＂離開網頁文件之後再執行程式碼＂。

搜尋＂run code after window close＂，找不到答案。

## 17:00 收到訊息

導師傳來訊息＂還可以嗎＂，我思考了一下，覺得用上述的關鍵字找不到答案。

## 17:30 其它方法

決定試看看其它方法，就是彈出視窗要前往的首頁網址列加參數，在首頁判斷如果參數值為 true 就顯示測驗讀取中的動畫，再前往結果頁。

向導師傳訊息＂之前用一些關鍵字搜尋偵測關閉視窗的事件的做法都沒找到，現在嘗試改用網址列加參數＂，導師回覆＂了解＂。

改用網址列參數後第一次測試就成功了。

## 18:00 調整順序

原本的運作流程：

* 首頁
  * 送出表單，顯示測驗讀取中的動畫
  * 判斷視窗寬度，分為電腦版和手機版
  * 開啟鼓勵按讚頁面
  * 電腦版：彈出視窗，手機板：整頁網頁

* 鼓勵按讚頁面
  * 按下關閉按鈕
  * 電腦版：關閉視窗、前往結果頁面
  * 手機板：直接前往結果頁面

第二點的運作流程：

* 首頁
  * 送出表單
  * 判斷視窗寬度，分為電腦版和手機版

* 電腦版：
  * 開啟鼓勵按讚頁面（彈出視窗）
  * 鼓勵按讚頁面按下關閉按鈕，關閉視窗
  * 首頁顯示測驗讀取中的動畫，前往結果頁面

* 手機版：
  * 首頁顯示測驗讀取中的動畫
  * 開啟鼓勵按讚頁面（整頁網頁）
  * 鼓勵按讚頁面按下關閉按鈕，前往結果頁面

調整目前的程式碼的結構與順序以達成這些描述。

## 18:30 下班

傳訊息給導師＂目前在調整程式碼的結構，明天再繼續＂。上傳目前進度。

想起明天放假，決定直接去問導師接下來如何處理，導師說下周再繼續就好。

導師傳來訊息＂新年快樂，年後再繼續，辛苦了＂，我回覆＂新年快樂＂。

## 本日心得

希望下周能順利完成。

> :ToCPrevNext